<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="#">

<!--    Materialize Icons -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!--    Compiled and minified Materialize CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

<!--    Personalized Styling -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css" />
    
<!--    EmailJS API, sends email to owner of site-->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.3.2/dist/email.min.js"></script>
    
<!--    This section must be in the head section to work EmailJS -->
	<script>
		(function(){
            emailjs.init("user_VWTMl2a56d4w3kUKpKAyq");
        })();
	</script>

    <title>BOS UP</title>
</head>
	
<body class="blue lighten-5">
<!--    Header      -->
    <header>
<!--    Navbar      -->
        <div class="navbar navbar-fixed">
            <nav class="blue darken-4">
                <div class="nav-wrapper">
                    <a href="{{ url_for('index') }}" class="brand-logo">BOS UP</a>
                    <a href="#" data-target="mobile-demo" class="sidenav-trigger right">
                        <i class="material-icons">menu</i>
                    </a>
                    <ul id="nav-mobile" class="right hide-on-med-and-down">
                        <li>
                            <a  class="{% if 'index' in request.path %} active {% endif %}"
                                title="Home" 
                                href="{{ url_for('index') }}">
                                Home
                            </a>
                        </li>
                        <li>
                            <a  class="{% if 'vacancies' in request.path %} active {% endif %}"
                                title= {% if g.user['profile'] != 'admin' %} "Check our vacancies" {% else %} "Manage vacancies" {% endif %} 
                                href="{{ url_for('vacancies') }}">
                                Vacancies
                            </a>
                        </li>
                    {% if not g.user %}
                        <li>
                            <a  class="{% if 'login' in request.path %} active {% endif %}"
                                title="Login with your credentials" 
                                href="{{ url_for('login') }}">
                                Login
                            </a>
                        </li>
                        <li>
                            <a  class="{% if 'register' in request.path %} active {% endif %}" 
                                title="Register to get an user account" 
                                href="{{ url_for('register') }}">
                                Register
                            </a>
                        </li>
                    {% else %}
                        {% if g.user['profile'] != 'admin' %}
                            <li>
                                <a  class="{% if 'myapplications' in request.path %} active {% endif %}"
                                    title="See which applications you have" 
                                    href="{{ url_for('myapplications') }}" >
                                    My Applications
                                </a>
                            </li>
                        {% elif g.user['profile'] == 'admin' %}
                            <li>
                                <a  class="{% if 'applications' in request.path %} active {% endif %}"
                                    title="Manage applications" 
                                    href="{{ url_for('applications') }}" >
                                    Applications
                                </a>
                            </li>
                            <li>
                                <a  class="{% if 'users' in request.path %} active {% endif %}"
                                    title="Manage users"
                                    href="{{ url_for('users') }}">
                                    Users
                                </a>
                            </li>
                        {% endif %}
                            <li>
                                <a  class="{% if 'profile' in request.path %} active {% endif %}"
                                    title="Go to your userprofile" 
                                    href="{{ url_for('profile', candidate_id=g.user['_id']) }}">
                                    {{ g.user["user_name"] }}
                                </a>
                            </li>
                            <li>
                                <a title="Logout" href="{{ url_for('logout') }}">
                                    <i class="material-icons right">exit_to_app</i>
                                </a>
                            </li>
                    {% endif %}
                    </ul>
                </div>
            </nav>
        </div>
<!--    Mobile side Navbar      -->
        <ul class="sidenav" id="mobile-demo">
        {% if g.user %}
            <li>
                <a href="#">
                    {{ g.user['user_name'] }}
                    <i class="material-icons right">person</i>
                </a>
            </li>
            <li class="divider"></li>
        {% endif %}
            <li>
                <a href="{{ url_for('index') }}">
                    Home
                    <i class="material-icons right">home</i>
                </a>
            </li>
            <li>
                <a href="{{ url_for('vacancies') }}">
                    Vacancies
                    <i class="material-icons right">library_books</i>
                </a>
            </li>
        {% if not g.user %}
            <li>
                <a href="{{ url_for('login') }}">
                    Login
                    <i class="material-icons right">vpn_key</i>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{url_for('register')}}">
                    Register
                    <i class="material-icons right">format_align_left</i>
                </a>
            </li>
        {% else %}
            {% if g.user['profile'] != 'admin' %}
                <li>
                    <a href="{{ url_for('myapplications') }}" >
                        My Applications
                        <i class="material-icons right">transfer_within_a_station</i>
                    </a>
                </li>
            {% elif g.user['profile'] == 'admin' %}
                <li>
                    <a  href="{{ url_for('applications') }}" >
                        Applications
                        <i class="material-icons right">transfer_within_a_station</i>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('users') }}">
                        Users
                        <i class="material-icons right">supervisor_account</i>
                    </a>
                </li>
            {% endif %}
                <li>
                    <a href="{{ url_for('profile', candidate_id=g.user['_id']) }}">
                        Profile
                        <i class="material-icons right">person</i>
                    </a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="{{ url_for('logout') }}">
                        Logout
                        <i class="material-icons right">exit_to_app</i>
                    </a>
                </li>
        {% endif %}
        </ul>
    </header>

<!--    Content section      -->
    <section class="container">
		{% block content %}
		{% endblock %}
	</section>

<!--    Floating quick action menu, only available for admins     -->
{% if g.user['profile'] == 'admin' %}
    <div class="fixed-action-btn">
        <a class="btn-floating btn-large red">
            <i class="large material-icons">mode_edit</i>
        </a>
        <ul>
            <li>
                <a class="btn-floating green" title="Create vacancy" href="{{url_for('add_vacancy')}}">
                    <i class="material-icons right">add</i>
                    Add Vacancy
                </a>
            </li>
            <li>
                <a class="btn-floating yellow darken-1" title="Create application" href="{{url_for('add_application', vacancy_id='admin')}}">
                    <i class="material-icons">assignment</i>
                </a>
            </li>
            <li>
                <a class="btn-floating green" title="Create user/candidate" href="{{url_for('add_user')}}">
                    <i class="material-icons">person</i>
                </a>
            </li>
        </ul>
    </div>
{% endif %}

<!--    Footer      -->
    <footer class="blue darken-4">
		Â© 2020 Copyright: Robbert Bos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="{{ url_for('contact') }}">Contact us</a>
	</footer>

<!--    jQuery -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<!--    Compiled and minified Materialize JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<!--    EmailJS API, sends email to owner of site -->
	<script src="{{ url_for('static', filename='js/contactMail.js') }}"></script>

    <script>
		$(document).ready(function(){
            $('select').formSelect();                           // For select fields
            $('.sidenav').sidenav();                            // For sidebar mobile
            $('.collapsible').collapsible();                    // For collapsible list ex: vacancies
            $('.fixed-action-btn').floatingActionButton();      // For floating menu
            $('.datepicker').datepicker();                      // For date fields
            $('.tabs').tabs();                                  // For tabs in userprofile
        });
    </script>

<!-- Script to prevent autoprefill of browser on forms -->
{% if g.user['profile'] == 'admin' or 'register' in request.path or 'login' in request.path %}
    <script>
        $("input").click(function(){
            $(this).removeAttr("readonly");
        });
    </script>
{% endif %}
</body>
</html>