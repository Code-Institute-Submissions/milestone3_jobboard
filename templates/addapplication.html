{% extends 'base.html' %} {% block content %}

<!--    A page for a new application -->
<div class="container first-container">
    <div class="row">

        <!--    Title section     -->
        <div class="col">
            <form action="{{url_for('insert_application')}}" method="POST">
                {% if g.user['profile'] == 'admin' %}
                <h1>
                    Add Application
                </h1>
                {% else %}
                <h1>
                    Application
                </h1>
                {% endif %}

                <!--    Name of the vacancy, function title of the job    -->
                <!--    Prefilled when creating from a vacancy   -->
                <div class="form-group">
                    <div class="row">
                        <div class="col-8">
                            <label for="vacancy_name">
                                    Vacancy Name
                                </label>

                            <!--    Prefilled and readonly for a regular user  -->
                            {% if g.user['profile'] != 'admin' %}
                            <input value="{{ vacancy.vacancy_name }}" id="vacancy_name" name="vacancy_name" type="text" class="form-control" readonly/> {% else %}
                            <select id="vacancy_name" name="vacancy_name" class="form-control">
                                    <option selected>
                                        Choose Vacancy
                                    </option>
                                {% for vac in vacancies %}
                                    {% if vac.vacancy_name == vacancy.vacancy_name %}
                                    <option value="{{ vac.vacancy_name }}- {{ vac.end_date }}" selected>
                                        {{ vac.vacancy_name }} - {{ vac.end_date }}
                                    </option>
                                    {% else %}
                                    <option value="{{ vac.vacancy_name }}- {{ vac.end_date }}">
                                        {{ vac.vacancy_name }}- {{ vac.end_date }}
                                    </option>
                                    {% endif %}
                                {% endfor %}
                                </select> {% endif %}
                        </div>

                        <!--    Application status     -->
                        <div class="col-4">
                            <label for="status">Status Job Application</label> {% if g.user['profile'] != 'admin' %}
                            <input value="open" id="status" name="status" type="text" class="form-control" readonly/> {% else %}
                            <select id="status" name="status" class="form-control">
                                        <option selected>Choose Status</option>
                                    {% for stat in status %}
                                        <option value="{{ stat.status_name }}">{{ stat.status_name }}</option>
                                    {% endfor %}
                                    </select> {% endif %}
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="row">

                        <!--    Availability of the candidate and candidate name    -->
                        <div class="col-6">
                            <label for="start_date">
                                    Available from
                                </label>
                            <input class="form-control" type="date" id="start_date" name="start_date">
                        </div>
                        <div class="input-field col s6">
                            <label for="candidate_name">
                                    Candidate name
                                </label>

                            <!--    Prefilled and readonly for a regular user  -->
                            {% if g.user['profile'] != 'admin' %}
                            <input value="{{ g.user['user_name'] }}" id="candidate_name" name="candidate_name" type="text" class="form-control" readonly /> {% else %}
                            <select id="candidate_name" name="candidate_name" class="form-control">
                                    <option selected>
                                        Choose Candidate
                                    </option>
                                    {% for can in candidates %}
                                        <option value="{{ can.user_name }}">{{ can.user_name }}</option>
                                    {% endfor %}
                                </select> {% endif %}
                        </div>
                    </div>
                </div>

                <!--    Comments on the appication or from candidate    -->
                <div class="form-group">
                    <label for="comments">
                            Comments
                        </label>
                    <textarea id="comments" name="comments" class="form-control" rows="5"></textarea>
                </div>

                <!--    Vacancy text, line break can be used in this textarea    -->
                <div class="form-group">
                    <label for="vacancy_text">
                            Vacancy Text
                        </label>
                    <textarea class="form-control" id="vacancy_text" name="vacancy_text" rows="20" readonly>{{ vacancy.vacancy_text }}</textarea>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}